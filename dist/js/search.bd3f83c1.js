(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"17d1":function(e,t,a){},"1cce":function(e,t,a){"use strict";var n=a("17d1"),r=a.n(n);r.a},"2d3b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Search Contacts")]),a("SearchForm")],1)},r=[],s=(a("cadf"),a("551c"),a("097d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"search"}},[a("div",[a("form",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.first_name,expression:"first_name"}],attrs:{placeholder:"First Name",type:"text"},domProps:{value:e.first_name},on:{input:function(t){t.target.composing||(e.first_name=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.last_name,expression:"last_name"}],attrs:{placeholder:"Last Name",type:"text"},domProps:{value:e.last_name},on:{input:function(t){t.target.composing||(e.last_name=t.target.value)}}})]),a("button",{staticClass:"focus",on:{click:e.search}},[e._v("Search")])]),0!==e.data.length?a("Table",{attrs:{data:e.data}}):e._e(),e.message?a("div",{staticClass:"message"},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e()],1)}),o=[],i=(a("96cf"),a("3040")),c=a("c93e"),u=a("2f62"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("table",{class:e.layout},[a("thead",[a("tr",e._l(e.columns,function(t,n){return a("th",{key:n},[e._v("\n        "+e._s(t.replace(/_/g," "))+"\n      ")])}))]),a("tbody",e._l(e.data,function(t,n){return a("tr",{key:n+"r"},e._l(e.columns,function(n,r){return a("td",{key:r+"d"},[a("router-link",{attrs:{to:"/contact/"+t.id}},[e._v(e._s(t[n]))])],1)}))}))])])},d=[],m={name:"Table",props:{columns:{type:Array,default:function(){return["id","first_name","last_name","date_of_birth"]}},layout:{type:String,default:"horizontal"}},computed:Object(c["a"])({},Object(u["d"])({data:function(e){return e.data}}))},p=m,f=(a("3e6a"),a("2877")),h=Object(f["a"])(p,l,d,!1,null,"fa6d15aa",null);h.options.__file="Table.vue";var _=h.exports,v=(a("9c29"),a("46f1")),g={name:"SearchForm",components:{Table:_},props:{},data:function(){return{message:"",first_name:"",last_name:"",total_pages:""}},computed:Object(c["a"])({},Object(u["d"])({data:function(e){return e.data},page:function(e){return e.page}}),{query:{get:function(){return JSON.stringify([{name:"first_name",op:"ilike",val:"%".concat(this.first_name,"%")},{name:"last_name",op:"ilike",val:"%".concat(this.last_name,"%")}])}},canQueryMore:{get:function(){var e=this.page,t=this.first_name+this.last_name;return""!==t.trim()&&e>=2}}}),methods:Object(c["a"])({},Object(u["b"])(["setState","appendState"]),{setSelected:function(e){this.$data.selectedOption=e},setProps:function(e){this.total_pages=e.total_pages,e.objects.length?this.message="":this.message="No Results Found";var t={key:"page",data:e.page+1};this.setState(t)},search:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t='q={"filters":'.concat(this.query,"}"),e.next=3,Object(v["e"])(t);case 3:a=e.sent,n={key:"data",data:a.objects},this.setState(n),this.setProps(a);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),loadMore:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.canQueryMore&&!(this.total_pages<=this.page)){e.next=3;break}return this.message="No Further Results Found",e.abrupt("return");case 3:return t='q={"filters":'.concat(this.query,"}&page=").concat(this.page||2),e.next=6,Object(v["e"])(t);case 6:a=e.sent,n={key:"data",data:a.objects},this.appendState(n),this.setProps(a);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleScroll:function(){var e=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;e&&this.loadMore()}}),mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},b=g,y=(a("1cce"),Object(f["a"])(b,s,o,!1,null,"435ee5a7",null));y.options.__file="SearchForm.vue";var w=y.exports,S={name:"home",components:{SearchForm:w}},j=S,k=Object(f["a"])(j,n,r,!1,null,null,null);k.options.__file="Search.vue";t["default"]=k.exports},"3e6a":function(e,t,a){"use strict";var n=a("86eb"),r=a.n(n);r.a},"86eb":function(e,t,a){}}]);
//# sourceMappingURL=search.bd3f83c1.js.map